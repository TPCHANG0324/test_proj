import{_ as D,a as w}from"./MainHeader-rTy68fv-.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as o,c as i,b as t,t as l,s as m,a as b,F as d,u as _,C as v,E as f,q as y,d as k,y as p,f as S}from"./index-CPvMC4GV.js";const P={name:"OrderDetailPopup",props:{isVisible:{type:Boolean,default:!1},order:{type:Object,default:()=>({})}},methods:{closePopup(){this.$emit("close")}}},F={key:0,class:"popup-overlay"},N={class:"popup-content"},I={class:"order-info"},R={class:"info-row"},V={class:"info-row"},M={class:"info-row"},B={class:"info-row"},U={class:"info-row"},X={class:"info-row"},x={class:"info-row"};function K(n,s,u,C,r,a){return u.isVisible?(o(),i("div",F,[t("div",N,[t("button",{class:"close-btn",onClick:s[0]||(s[0]=(...h)=>a.closePopup&&a.closePopup(...h))},"×"),s[8]||(s[8]=t("h2",{class:"popup_mb"},"訂單詳情",-1)),t("div",I,[t("div",R,[s[1]||(s[1]=t("span",{class:"label"},"訂單編號：",-1)),t("span",null,l(u.order.orderId),1)]),t("div",V,[s[2]||(s[2]=t("span",{class:"label"},"訂購日期：",-1)),t("span",null,l(u.order.date),1)]),t("div",M,[s[3]||(s[3]=t("span",{class:"label"},"商品名稱：",-1)),t("span",null,l(u.order.productName),1)]),t("div",B,[s[4]||(s[4]=t("span",{class:"label"},"商品金額：",-1)),t("span",null,l(u.order.price)+" 元",1)]),t("div",U,[s[5]||(s[5]=t("span",{class:"label"},"數量：",-1)),t("span",null,l(u.order.quantity),1)]),t("div",X,[s[6]||(s[6]=t("span",{class:"label"},"配送狀態：",-1)),t("span",null,l(u.order.status),1)]),t("div",x,[s[7]||(s[7]=t("span",{class:"label"},"收件地址：",-1)),t("span",null,l(u.order.address),1)])])])])):m("",!0)}const j=g(P,[["render",K],["__scopeId","data-v-b14b1588"]]),q="/test_proj/assets/mbhead.BLOmt6G-.png",J={components:{MainHeader:D,MainFooter:w,OrderDetailPopup:j},data(){return{activeSection:"purchase",userData:JSON.parse(localStorage.getItem("userData"))||{name:"大中天",password:"********",phone:"0912345678",email:"example@email.com"},tempData:{name:"",password:"",phone:"",email:""},editStates:{name:!1,password:!1,phone:!1,email:!1},validationErrors:{phone:"",email:"",showOrderPopup:!1,selectedOrder:null,purchaseRecords:[{orderId:"ORD001",date:"2024/12/25",productName:"環保吸管",price:300,quantity:1,status:"已送達",address:"台北市大安區復興南路一段390號2樓",source:"環保市集"}]}}},methods:{showOrderDetail(n){this.selectedOrder=n,this.showOrderPopup=!0},showSection(n){this.activeSection=n},closeOrderPopup(){this.showOrderPopup=!1,this.selectedOrder=null},editField(n){this.tempData[n]=n==="password"?"":this.userData[n],this.editStates[n]=!0,this.validationErrors[n]&&(this.validationErrors[n]="")},validateField(n){return n==="phone"?this.tempData.phone?/^09\d{8}$/.test(this.tempData.phone)?(this.validationErrors.phone="",!0):(this.validationErrors.phone="請輸入正確的手機格式（09開頭共10碼）",!1):(this.validationErrors.phone="請輸入手機號碼",!1):n==="email"?this.tempData.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.tempData.email)?(this.validationErrors.email="",!0):(this.validationErrors.email="請輸入正確的電子郵件格式",!1):(this.validationErrors.email="請輸入電子郵件",!1):!0},formatEmail(n){return n.replace(/(.{30})/g,`$1
`)},saveField(n){this.validateField(n)&&this.tempData[n].trim()&&(this.userData[n]=this.tempData[n].trim(),localStorage.setItem("userData",JSON.stringify(this.userData)),this.editStates[n]=!1,this.tempData[n]="",this.validationErrors[n]="")},async fetchUserData(){try{const s=await(await fetch("/api/user-profile")).json();this.userData=s,localStorage.setItem("userData",JSON.stringify(s))}catch(n){console.error("Error fetching user data:",n)}}}},H={class:"wrapperpr"},L={class:"profile_top"},T={class:"profile-container-special_left"},z={class:"profile-header-special"},G={class:"profile-greeting-special"},A={class:"profile-container-special_right"},Q={class:"profile-info-special"},W={class:"profile-field"},Y={class:"input_2"},Z={class:"profile-field"},$={key:0,class:"error-message"},tt={class:"input_2"},et={class:"profile-field"},st={key:0,class:"error-message"},lt={class:"input_2 email-display"},nt={class:"profile_bottom"},ot={class:"purchase-record-special"},it={class:"btn2_btn"},at={class:"btn2_btn_top"},rt={class:"table-container_mb"},dt={key:0,class:"table_mb"},ut={class:"delivered-special"},pt=["onClick"],ct={class:"delivered-special"},mt=["onClick"],ht={class:"delivered-special"},bt=["onClick"],_t={class:"delivered-special"},vt=["onClick"],ft={class:"delivered-special"},yt=["onClick"],kt={class:"delivered-special"},Dt=["onClick"],wt={class:"delivered-special"},gt=["onClick"],Ct={class:"table-container_mb"},Ot={key:0,class:"personal-record"};function Et(n,s,u,C,r,a){const h=D,O=S("OrderDetailPopup"),E=w;return o(),i(d,null,[b(h),t("div",H,[s[21]||(s[21]=t("h1",{class:"profile-title"},"會員資訊",-1)),t("div",L,[t("div",T,[t("div",z,[s[14]||(s[14]=t("img",{src:q,alt:"會員頭像",class:"profile-pic-special"},null,-1)),t("h1",G,l(r.userData.name)+" 您好！",1)])]),t("div",A,[t("div",Q,[t("div",W,[s[15]||(s[15]=t("label",{for:"name",class:"label_mb"},"姓名",-1)),r.editStates.name?(o(),i(d,{key:0},[_(t("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=e=>r.tempData.name=e),type:"text",placeholder:"輸入您的姓名",class:"input_2 input_editing",onKeyup:s[1]||(s[1]=f(e=>a.saveField("name"),["enter"]))},null,544),[[v,r.tempData.name]]),t("button",{class:"button_mb",onClick:s[2]||(s[2]=e=>a.saveField("name"))},"儲存")],64)):(o(),i(d,{key:1},[t("span",Y,l(r.userData.name),1),t("button",{class:"button_mb",onClick:s[3]||(s[3]=e=>a.editField("name"))},"修改")],64))]),t("div",Z,[s[16]||(s[16]=t("label",{for:"phone",class:"label_mb"},"手機",-1)),r.editStates.phone?(o(),i(d,{key:0},[_(t("input",{id:"phone","onUpdate:modelValue":s[4]||(s[4]=e=>r.tempData.phone=e),type:"text",placeholder:"輸入您的手機",class:y(["input_2 input_editing",{"input-error":r.validationErrors.phone}]),onKeyup:s[5]||(s[5]=f(e=>a.saveField("phone"),["enter"]))},null,34),[[v,r.tempData.phone]]),t("button",{class:"button_mb",onClick:s[6]||(s[6]=e=>a.saveField("phone"))},"儲存"),r.validationErrors.phone?(o(),i("span",$,l(r.validationErrors.phone),1)):m("",!0)],64)):(o(),i(d,{key:1},[t("span",tt,l(r.userData.phone),1),t("button",{class:"button_mb",onClick:s[7]||(s[7]=e=>a.editField("phone"))},"修改")],64))]),t("div",et,[s[17]||(s[17]=t("label",{for:"email",class:"label_mb"},"信箱",-1)),r.editStates.email?(o(),i(d,{key:0},[_(t("input",{id:"email","onUpdate:modelValue":s[8]||(s[8]=e=>r.tempData.email=e),type:"email",placeholder:"輸入您的信箱",class:y(["input_2 input_editing",{"input-error":r.validationErrors.email}]),onKeyup:s[9]||(s[9]=f(e=>a.saveField("email"),["enter"]))},null,34),[[v,r.tempData.email]]),t("button",{class:"button_mb",onClick:s[10]||(s[10]=e=>a.saveField("email"))},"儲存"),r.validationErrors.email?(o(),i("span",st,l(r.validationErrors.email),1)):m("",!0)],64)):(o(),i(d,{key:1},[t("span",lt,l(a.formatEmail(r.userData.email)),1),t("button",{class:"button_mb",onClick:s[11]||(s[11]=e=>a.editField("email"))},"修改")],64))])])])]),t("div",nt,[t("div",ot,[t("div",it,[t("div",at,[t("button",{class:"purchase-record-btn11",onClick:s[12]||(s[12]=e=>a.showSection("purchase"))},"購買紀錄"),t("button",{class:"purchase-record-btn12",onClick:s[13]||(s[13]=e=>a.showSection("profile"))},"個人紀錄")]),s[18]||(s[18]=t("div",{class:"bt2_btn_bottom"},[t("div",{class:"profile-stats-special"},[t("p",null,[k("小寵物經驗值: "),t("strong",null,"200"),k(" | 累積地球幣: "),t("strong",null,"300")])])],-1))]),t("div",rt,[r.activeSection==="purchase"?(o(),i("table",dt,[s[19]||(s[19]=t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"商品名稱"),t("th",null,"消費金額"),t("th",null,"來源"),t("th",null,"配送狀態"),t("th",null,"訂單詳情")])],-1)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",ut,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,pt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",ct,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,mt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",ht,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,bt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",_t,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,vt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",ft,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,yt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",kt,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,Dt)])])]))),128)),(o(!0),i(d,null,p(n.purchaseRecords,e=>(o(),i("tbody",{key:e.orderId},[t("tr",null,[t("td",null,l(e.date),1),t("td",null,l(e.productName),1),t("td",null,l(e.price),1),t("td",null,l(e.source),1),t("td",wt,l(e.status),1),t("td",null,[t("button",{class:"order-detail-btn",onClick:c=>a.showOrderDetail(e)},"訂單詳情",8,gt)])])]))),128))])):m("",!0),t("div",Ct,[r.activeSection==="profile"?(o(),i("table",Ot,s[20]||(s[20]=[t("thead",null,[t("tr",null,[t("th",null,"日期"),t("th",null,"地球幣"),t("th",null,"經驗值")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1),t("tbody",null,[t("tr",null,[t("td",null,"2024/12/25"),t("td",null,"300點"),t("td",null,"200.EXP")])],-1)]))):m("",!0)])])]),b(O,{"is-visible":n.showOrderPopup,order:n.selectedOrder,onClose:a.closeOrderPopup},null,8,["is-visible","order","onClose"]),b(E,{class:"footer_member"})])])],64)}const Nt=g(J,[["render",Et]]);export{Nt as default};
