import{_ as D,a as y}from"./MainHeader-ibJPey1e.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as r,c as a,b as e,t as n,s as u,a as c,F as p,u as v,C as h,E as _,q as b,d as f,y as O,f as S}from"./index-CNj3_Qp6.js";const C={name:"OrderDetailPopup",props:{isVisible:{type:Boolean,default:!1},order:{type:Object,default:()=>({})}},methods:{closePopup(){this.$emit("close")}}},F={key:0,class:"popup-overlay"},P={class:"popup-content"},x={class:"order-info"},N={class:"info-row"},V={class:"info-row"},I={class:"info-row"},R={class:"info-row"},M={class:"info-row"},B={class:"info-row"},U={class:"info-row"};function K(s,t,d,k,l,i){return d.isVisible?(r(),a("div",F,[e("div",P,[e("button",{class:"close-btn",onClick:t[0]||(t[0]=(...m)=>i.closePopup&&i.closePopup(...m))},"×"),t[8]||(t[8]=e("h2",{class:"popup_mb"},"訂單詳情",-1)),e("div",x,[e("div",N,[t[1]||(t[1]=e("span",{class:"label"},"訂單編號：",-1)),e("span",null,n(d.order.orderId),1)]),e("div",V,[t[2]||(t[2]=e("span",{class:"label"},"訂購日期：",-1)),e("span",null,n(d.order.date),1)]),e("div",I,[t[3]||(t[3]=e("span",{class:"label"},"商品名稱：",-1)),e("span",null,n(d.order.productName),1)]),e("div",R,[t[4]||(t[4]=e("span",{class:"label"},"商品金額：",-1)),e("span",null,n(d.order.price)+" 元",1)]),e("div",M,[t[5]||(t[5]=e("span",{class:"label"},"數量：",-1)),e("span",null,n(d.order.quantity),1)]),e("div",B,[t[6]||(t[6]=e("span",{class:"label"},"配送狀態：",-1)),e("span",null,n(d.order.status),1)]),e("div",U,[t[7]||(t[7]=e("span",{class:"label"},"收件地址：",-1)),e("span",null,n(d.order.address),1)])])])])):u("",!0)}const j=g(C,[["render",K],["__scopeId","data-v-b14b1588"]]),q="/test_proj/assets/mbhead.BLOmt6G-.png",J={components:{MainHeader:D,MainFooter:y,OrderDetailPopup:j},data(){return{activeSection:"purchase",userData:JSON.parse(localStorage.getItem("userData"))||{name:"大中天",password:"********",phone:"0912345678",email:"example@email.com"},tempData:{name:"",password:"",phone:"",email:""},editStates:{name:!1,password:!1,phone:!1,email:!1},validationErrors:{phone:"",email:""},showOrderPopup:!1,selectedOrder:null,purchaseRecords:[{orderId:"ORD001",date:"2024/12/25",productName:"環保吸管",price:300,quantity:1,status:"已送達",address:"台北市大安區復興南路一段390號2樓",source:"環保市集"}]}},methods:{showOrderDetail(s){this.selectedOrder=s,this.showOrderPopup=!0},showSection(s){this.activeSection=s},closeOrderPopup(){this.showOrderPopup=!1,this.selectedOrder=null},editField(s){this.tempData[s]=s==="password"?"":this.userData[s],this.editStates[s]=!0,this.validationErrors[s]&&(this.validationErrors[s]="")},validateField(s){return s==="phone"?this.tempData.phone?/^09\d{8}$/.test(this.tempData.phone)?(this.validationErrors.phone="",!0):(this.validationErrors.phone="請輸入正確的手機格式（09開頭共10碼）",!1):(this.validationErrors.phone="請輸入手機號碼",!1):s==="email"?this.tempData.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.tempData.email)?(this.validationErrors.email="",!0):(this.validationErrors.email="請輸入正確的電子郵件格式",!1):(this.validationErrors.email="請輸入電子郵件",!1):!0},formatEmail(s){return s.replace(/(.{30})/g,`$1
`)},saveField(s){this.validateField(s)&&this.tempData[s].trim()&&(this.userData[s]=this.tempData[s].trim(),localStorage.setItem("userData",JSON.stringify(this.userData)),this.editStates[s]=!1,this.tempData[s]="",this.validationErrors[s]="")},async fetchUserData(){try{const t=await(await fetch("/api/user-profile")).json();this.userData=t,localStorage.setItem("userData",JSON.stringify(t))}catch(s){console.error("Error fetching user data:",s)}}}},H={class:"wrapperpr"},L={class:"profile_top"},T={class:"profile-container-special_left"},z={class:"profile-header-special"},G={class:"profile-greeting-special"},X={class:"profile-container-special_right"},A={class:"profile-info-special"},Q={class:"profile-field"},W={class:"input_2"},Y={class:"profile-field"},Z={key:0,class:"error-message"},$={class:"input_2"},ee={class:"profile-field"},te={key:0,class:"error-message"},se={class:"input_2 email-display"},le={class:"profile_bottom"},oe={class:"purchase-record-special"},ne={class:"btn2_btn"},ie={class:"btn2_btn_top"},re={class:"table-container_mb"},ae={key:0,class:"table_mb"},de={class:"delivered-special"},pe=["onClick"],ue={class:"table-container_mb"},me={key:0,class:"personal-record"};function ce(s,t,d,k,l,i){const m=D,w=S("OrderDetailPopup"),E=y;return r(),a(p,null,[c(m),e("div",H,[t[21]||(t[21]=e("h1",{class:"profile-title"},"會員資訊",-1)),e("div",L,[e("div",T,[e("div",z,[t[14]||(t[14]=e("img",{src:q,alt:"會員頭像",class:"profile-pic-special"},null,-1)),e("h1",G,n(l.userData.name)+" 您好！",1)])]),e("div",X,[e("div",A,[e("div",Q,[t[15]||(t[15]=e("label",{for:"name",class:"label_mb"},"姓名",-1)),l.editStates.name?(r(),a(p,{key:0},[v(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>l.tempData.name=o),type:"text",placeholder:"輸入您的姓名",class:"input_2 input_editing",onKeyup:t[1]||(t[1]=_(o=>i.saveField("name"),["enter"]))},null,544),[[h,l.tempData.name]]),e("button",{class:"button_mb",onClick:t[2]||(t[2]=o=>i.saveField("name"))},"儲存")],64)):(r(),a(p,{key:1},[e("span",W,n(l.userData.name),1),e("button",{class:"button_mb",onClick:t[3]||(t[3]=o=>i.editField("name"))},"修改")],64))]),e("div",Y,[t[16]||(t[16]=e("label",{for:"phone",class:"label_mb"},"手機",-1)),l.editStates.phone?(r(),a(p,{key:0},[v(e("input",{id:"phone","onUpdate:modelValue":t[4]||(t[4]=o=>l.tempData.phone=o),type:"text",placeholder:"輸入您的手機",class:b(["input_2 input_editing",{"input-error":l.validationErrors.phone}]),onKeyup:t[5]||(t[5]=_(o=>i.saveField("phone"),["enter"]))},null,34),[[h,l.tempData.phone]]),e("button",{class:"button_mb",onClick:t[6]||(t[6]=o=>i.saveField("phone"))},"儲存"),l.validationErrors.phone?(r(),a("span",Z,n(l.validationErrors.phone),1)):u("",!0)],64)):(r(),a(p,{key:1},[e("span",$,n(l.userData.phone),1),e("button",{class:"button_mb",onClick:t[7]||(t[7]=o=>i.editField("phone"))},"修改")],64))]),e("div",ee,[t[17]||(t[17]=e("label",{for:"email",class:"label_mb"},"信箱",-1)),l.editStates.email?(r(),a(p,{key:0},[v(e("input",{id:"email","onUpdate:modelValue":t[8]||(t[8]=o=>l.tempData.email=o),type:"email",placeholder:"輸入您的信箱",class:b(["input_2 input_editing",{"input-error":l.validationErrors.email}]),onKeyup:t[9]||(t[9]=_(o=>i.saveField("email"),["enter"]))},null,34),[[h,l.tempData.email]]),e("button",{class:"button_mb",onClick:t[10]||(t[10]=o=>i.saveField("email"))},"儲存"),l.validationErrors.email?(r(),a("span",te,n(l.validationErrors.email),1)):u("",!0)],64)):(r(),a(p,{key:1},[e("span",se,n(i.formatEmail(l.userData.email)),1),e("button",{class:"button_mb",onClick:t[11]||(t[11]=o=>i.editField("email"))},"修改")],64))])])])]),e("div",le,[e("div",oe,[e("div",ne,[e("div",ie,[e("button",{class:"purchase-record-btn11",onClick:t[12]||(t[12]=o=>i.showSection("purchase"))},"購買紀錄"),e("button",{class:"purchase-record-btn12",onClick:t[13]||(t[13]=o=>i.showSection("profile"))},"個人紀錄")]),t[18]||(t[18]=e("div",{class:"bt2_btn_bottom"},[e("div",{class:"profile-stats-special"},[e("p",null,[f("小寵物經驗值: "),e("strong",null,"200"),f(" | 累積地球幣: "),e("strong",null,"300")])])],-1))]),e("div",re,[l.activeSection==="purchase"?(r(),a("table",ae,[t[19]||(t[19]=e("thead",null,[e("tr",null,[e("th",null,"日期"),e("th",null,"商品名稱"),e("th",null,"消費金額"),e("th",null,"來源"),e("th",null,"配送狀態"),e("th",null,"訂單詳情")])],-1)),e("tbody",null,[(r(!0),a(p,null,O(l.purchaseRecords,o=>(r(),a("tr",{key:o.orderId},[e("td",null,n(o.date),1),e("td",null,n(o.productName),1),e("td",null,n(o.price),1),e("td",null,n(o.source),1),e("td",de,n(o.status),1),e("td",null,[e("button",{class:"order-detail-btn",onClick:ve=>i.showOrderDetail(o)},"訂單詳情",8,pe)])]))),128))])])):u("",!0),e("div",ue,[l.activeSection==="profile"?(r(),a("table",me,t[20]||(t[20]=[e("thead",null,[e("tr",null,[e("th",null,"日期"),e("th",null,"地球幣"),e("th",null,"經驗值")])],-1),e("tbody",null,[e("tr",null,[e("td",null,"2024/12/25"),e("td",null,"300點"),e("td",null,"200.EXP")])],-1)]))):u("",!0)])])]),c(w,{"is-visible":l.showOrderPopup,order:l.selectedOrder,onClose:i.closeOrderPopup},null,8,["is-visible","order","onClose"]),c(E,{class:"footer_member"})])])],64)}const fe=g(J,[["render",ce]]);export{fe as default};
