import{_ as g,a as O,b as k}from"./MainHeader-BkXr6mGd.js";import{g as i,c as a,b as e,t as n,s as u,a as c,F as p,u as v,C as h,E as b,q as f,d as D,y,f as x}from"./index-C7pJ61JF.js";const C={name:"OrderDetailPopup",props:{isVisible:{type:Boolean,default:!1},order:{type:Object,default:()=>({})}},methods:{closePopup(){this.$emit("close")}}},F={key:0,class:"popup-overlay"},N={class:"popup-content"},R={class:"order-info"},P={class:"info-row"},I={class:"info-row"},q={class:"info-row"},V={class:"info-row"},M={class:"info-row"},B={class:"info-row"},K={class:"info-row"};function U(o,t,d,w,l,r){return d.isVisible?(i(),a("div",F,[e("div",N,[e("button",{class:"close-btn",onClick:t[0]||(t[0]=(...m)=>r.closePopup&&r.closePopup(...m))},"×"),t[8]||(t[8]=e("h2",{class:"popup_mb"},"訂單詳情",-1)),e("div",R,[e("div",P,[t[1]||(t[1]=e("span",{class:"label"},"訂單編號：",-1)),e("span",null,n(d.order.orderId),1)]),e("div",I,[t[2]||(t[2]=e("span",{class:"label"},"訂購日期：",-1)),e("span",null,n(d.order.date),1)]),e("div",q,[t[3]||(t[3]=e("span",{class:"label"},"商品名稱：",-1)),e("span",null,n(d.order.productName),1)]),e("div",V,[t[4]||(t[4]=e("span",{class:"label"},"商品金額：",-1)),e("span",null,n(d.order.price)+" 元",1)]),e("div",M,[t[5]||(t[5]=e("span",{class:"label"},"數量：",-1)),e("span",null,n(d.order.quantity),1)]),e("div",B,[t[6]||(t[6]=e("span",{class:"label"},"配送狀態：",-1)),e("span",null,n(d.order.status),1)]),e("div",K,[t[7]||(t[7]=e("span",{class:"label"},"收件地址：",-1)),e("span",null,n(d.order.address),1)])])])])):u("",!0)}const j=g(C,[["render",U]]),J="/test_proj/assets/mbhead.BLOmt6G-.png",H={components:{MainHeader:O,MainFooter:k,OrderDetailPopup:j},data(){return{activeSection:"purchase",userData:JSON.parse(localStorage.getItem("userData"))||{name:"大中天",phone:"0912345678",email:"example@email.com"},tempData:{name:"",phone:"",email:""},editStates:{name:!1,phone:!1,email:!1},validationErrors:{phone:"",email:""},showOrderPopup:!1,selectedOrder:null,purchaseRecords:[{orderId:"ORD001",date:"2024/12/25",productName:"環保吸管",price:300,quantity:1,status:"已送達",address:"台北市大安區復興南路一段390號2樓",source:"環保市集"},{orderId:"ORD002",date:"2024/12/20",productName:"可重複使用水壺",price:450,quantity:1,status:"已出貨",address:"新北市板橋區文化路二段",source:"綠色商店"},{orderId:"ORD003",date:"2024/12/15",productName:"竹纖維餐具組",price:580,quantity:1,status:"已送達",address:"台中市西屯區逢甲路",source:"永續生活"},{orderId:"ORD004",date:"2024/12/10",productName:"有機棉購物袋",price:250,quantity:2,status:"處理中",address:"高雄市鳳山區",source:"環保聯盟"},{orderId:"ORD005",date:"2024/12/05",productName:"天然洗髮精",price:380,quantity:1,status:"已送達",address:"台南市東區",source:"綠色生活"},{orderId:"ORD006",date:"2024/12/25",productName:"環保吸管",price:300,quantity:1,status:"已送達",address:"台北市大安區復興南路一段390號2樓",source:"環保市集"},{orderId:"ORD007",date:"2024/12/20",productName:"可重複使用水壺",price:450,quantity:1,status:"已出貨",address:"新北市板橋區文化路二段",source:"綠色商店"}],personalRecords:[{date:"2024/12/25",points:300,experience:200},{date:"2024/12/25",points:300,experience:200},{date:"2024/12/25",points:300,experience:200},{date:"2024/12/25",points:300,experience:200},{date:"2024/12/25",points:300,experience:200}]}},methods:{showOrderDetail(o){this.selectedOrder=o,this.showOrderPopup=!0},showSection(o){this.activeSection=o},closeOrderPopup(){this.showOrderPopup=!1,this.selectedOrder=null},editField(o){this.tempData[o]=this.userData[o],this.editStates[o]=!0,this.validationErrors[o]=""},validateField(o){return o==="phone"?this.tempData.phone?/^09\d{8}$/.test(this.tempData.phone)?(this.validationErrors.phone="",!0):(this.validationErrors.phone="請輸入正確的手機格式（09開頭共10碼）",!1):(this.validationErrors.phone="請輸入手機號碼",!1):o==="email"?this.tempData.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.tempData.email)?(this.validationErrors.email="",!0):(this.validationErrors.email="請輸入正確的電子郵件格式",!1):(this.validationErrors.email="請輸入電子郵件",!1):!0},formatEmail(o){return o.replace(/(.{30})/g,`$1
`)},saveField(o){this.validateField(o)&&this.tempData[o].trim()&&(this.userData[o]=this.tempData[o].trim(),localStorage.setItem("userData",JSON.stringify(this.userData)),this.editStates[o]=!1,this.tempData[o]="",this.validationErrors[o]="")},async fetchUserData(){try{const t=await(await fetch("/api/user-profile")).json();this.userData=t,localStorage.setItem("userData",JSON.stringify(t))}catch(o){console.error("Error fetching user data:",o)}}}},L={class:"wrapperpr"},T={class:"profile_top"},z={class:"profile-container-special_left"},G={class:"profile-header-special"},X={class:"profile-greeting-special"},A={class:"profile-container-special_right"},Q={class:"profile-info-special"},W={class:"profile-field"},Y={class:"input_2"},Z={class:"profile-field"},$={key:0,class:"error-message"},ee={class:"input_2"},te={class:"profile-field"},se={key:0,class:"error-message"},oe={class:"input_2 email-display"},le={class:"profile_bottom"},ne={class:"purchase-record-special"},re={class:"btn2_btn"},ie={class:"btn2_btn_top"},ae={class:"table-container_mb"},de={key:0,class:"table_mb"},pe={class:"delivered-special"},ue=["onClick"],me={key:1,class:"personal-record"};function ce(o,t,d,w,l,r){const m=O,E=x("OrderDetailPopup"),S=k;return i(),a("div",null,[c(m),e("div",L,[t[21]||(t[21]=e("h1",{class:"profile-title"},"會員資訊",-1)),e("div",T,[e("div",z,[e("div",G,[t[14]||(t[14]=e("img",{src:J,alt:"會員頭像",class:"profile-pic-special"},null,-1)),e("h1",X,n(l.userData.name)+" 您好！",1)])]),e("div",A,[e("div",Q,[e("div",W,[t[15]||(t[15]=e("label",{for:"name",class:"label_mb"},"姓名",-1)),l.editStates.name?(i(),a(p,{key:0},[v(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>l.tempData.name=s),placeholder:"輸入您的姓名",class:"input_2 input_editing",onKeyup:t[1]||(t[1]=b(s=>r.saveField("name"),["enter"]))},null,544),[[h,l.tempData.name]]),e("button",{class:"button_mb",onClick:t[2]||(t[2]=s=>r.saveField("name"))},"儲存")],64)):(i(),a(p,{key:1},[e("span",Y,n(l.userData.name),1),e("button",{class:"button_mb",onClick:t[3]||(t[3]=s=>r.editField("name"))},"修改")],64))]),e("div",Z,[t[16]||(t[16]=e("label",{for:"phone",class:"label_mb"},"手機",-1)),l.editStates.phone?(i(),a(p,{key:0},[v(e("input",{type:"text",id:"phone","onUpdate:modelValue":t[4]||(t[4]=s=>l.tempData.phone=s),placeholder:"輸入您的手機",class:f(["input_2 input_editing",{"input-error":l.validationErrors.phone}]),onKeyup:t[5]||(t[5]=b(s=>r.saveField("phone"),["enter"]))},null,34),[[h,l.tempData.phone]]),e("button",{class:"button_mb",onClick:t[6]||(t[6]=s=>r.saveField("phone"))},"儲存"),l.validationErrors.phone?(i(),a("span",$,n(l.validationErrors.phone),1)):u("",!0)],64)):(i(),a(p,{key:1},[e("span",ee,n(l.userData.phone),1),e("button",{class:"button_mb",onClick:t[7]||(t[7]=s=>r.editField("phone"))},"修改")],64))]),e("div",te,[t[17]||(t[17]=e("label",{for:"email",class:"label_mb"},"信箱",-1)),l.editStates.email?(i(),a(p,{key:0},[v(e("input",{type:"email",id:"email","onUpdate:modelValue":t[8]||(t[8]=s=>l.tempData.email=s),placeholder:"輸入您的信箱",class:f(["input_2 input_editing",{"input-error":l.validationErrors.email}]),onKeyup:t[9]||(t[9]=b(s=>r.saveField("email"),["enter"]))},null,34),[[h,l.tempData.email]]),e("button",{class:"button_mb",onClick:t[10]||(t[10]=s=>r.saveField("email"))},"儲存"),l.validationErrors.email?(i(),a("span",se,n(l.validationErrors.email),1)):u("",!0)],64)):(i(),a(p,{key:1},[e("span",oe,n(r.formatEmail(l.userData.email)),1),e("button",{class:"button_mb",onClick:t[11]||(t[11]=s=>r.editField("email"))},"修改")],64))])])])]),e("div",le,[e("div",ne,[e("div",re,[e("div",ie,[e("button",{class:"purchase-record-btn11",onClick:t[12]||(t[12]=s=>r.showSection("purchase"))},"購買紀錄"),e("button",{class:"purchase-record-btn12",onClick:t[13]||(t[13]=s=>r.showSection("profile"))},"個人紀錄")]),t[18]||(t[18]=e("div",{class:"bt2_btn_bottom"},[e("div",{class:"profile-stats-special"},[e("p",null,[D("小寵物經驗值: "),e("strong",null,"200"),D(" | 累積地球幣: "),e("strong",null,"300")])])],-1))]),e("div",ae,[l.activeSection==="purchase"?(i(),a("table",de,[t[19]||(t[19]=e("thead",null,[e("tr",null,[e("th",null,"日期"),e("th",null,"商品名稱"),e("th",null,"消費金額"),e("th",null,"來源"),e("th",null,"配送狀態"),e("th",null,"訂單詳情")])],-1)),(i(!0),a(p,null,y(l.purchaseRecords,s=>(i(),a("tbody",{key:s.orderId},[e("tr",null,[e("td",null,n(s.date),1),e("td",null,n(s.productName),1),e("td",null,n(s.price),1),e("td",null,n(s.source),1),e("td",pe,n(s.status),1),e("td",null,[e("button",{class:"order-detail-btn",onClick:_=>r.showOrderDetail(s)},"訂單詳情",8,ue)])])]))),128))])):u("",!0),l.activeSection==="profile"?(i(),a("table",me,[t[20]||(t[20]=e("thead",null,[e("tr",null,[e("th",null,"日期"),e("th",null,"地球幣"),e("th",null,"經驗值")])],-1)),(i(!0),a(p,null,y(l.personalRecords,(s,_)=>(i(),a("tbody",{key:_},[e("tr",null,[e("td",null,n(s.date),1),e("td",null,n(s.points)+"點",1),e("td",null,n(s.experience)+".EXP",1)])]))),128))])):u("",!0)])])])]),c(E,{"is-visible":l.showOrderPopup,order:l.selectedOrder,onClose:r.closeOrderPopup},null,8,["is-visible","order","onClose"]),c(S,{class:"footer_member"})])}const be=g(H,[["render",ce]]);export{be as default};
